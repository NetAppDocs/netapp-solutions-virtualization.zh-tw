---
sidebar: sidebar 
permalink: virtualization/virt-options-on-netapp.html 
keywords: virtualization, overview, options, vmware, alternatives, hyperv, proxmox, openshift 
summary: 本文檔概述了為什麼NetApp是虛擬化環境的最佳平台 - 無論採用何種虛擬化解決方案。 
---
= 了解如何使用NetApp實現任何虛擬化解決方案
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
了解NetApp ONTAP如何為虛擬化提供強大的基礎，尤其是回應最近的 VMware 授權變更。探索最佳化 VMware 環境、遷移到 VMware Cloud Foundation 或其他虛擬機器管理程式的策略，並利用 NetApp 的高階資料管理、保護和雲端整合功能。



== 介紹

鑑於 VMware 最近的授權變化，組織必須調整其虛擬化策略，以最大限度地提高成本效率和可擴展性並最大限度地降低業務風險。優化現有的 VMware 環境，考慮使用現有企業儲存從獨立 vSphere 遷移到 VMware Cloud Foundation (VCF) 並採用多虛擬機器管理程式或混合雲端方法是關鍵步驟。值得注意的是，VCF 5.2.1 透過允許使用外部儲存解決方案取代 vSAN 引入了增強的靈活性，簡化了組織在使用企業儲存功能和保持連續性的同時採用新授權模式的能力。

ONTAP是任何本地或雲端中的虛擬機器管理程式的最佳平台。 ONTAP支援本地環境中所有主要的虛擬機器管理程序，並在每個主要雲端中擁有第一方資料服務，支援 VMware 雲端產品和雲端原生工作負載。這使得組織能夠透過為其工作負載選擇適當的部署模型來輕鬆應對許可變更。

本文概述了最佳化 VMware 部署成本的策略，評估了多虛擬機器管理程式的採用情況，詳細介紹了虛擬機器從 vSphere 到 VCF 的遷移以及虛擬機器到備用虛擬機器管理程式的遷移，涵蓋了所有可用選項。



== 發生了什麼變化

博通收購 VMware 導致 VMware 授權模式發生重大轉變。新方法正在轉變為基於訂閱的捆綁定價結構，雖然符合行業趨勢，但預計會導致客戶成本大幅增加。請記住以下三個要點：

*基於訂閱的授權*：VMware 正在從永久授權轉向基於訂閱的模式。

*捆綁包裝*：VMware Cloud Foundation (VCF) 將多種產品捆綁在一起，為企業和服務提供者提供單一產品。

*按插槽到核心*：從按插槽到按 CPU 核心定價的轉變表明這是一個重大變化，可能會大幅增加成本。

*關鍵要點* - 這些變化促使客戶評估他們的虛擬化需求，更有效地優化利用率，並探索替代方案。



== 為什麼選擇ONTAP

NetApp儲存解決方案使客戶能夠充分利用虛擬化基礎架構的所有優勢。透過NetApp解決方案，客戶可以快速部署全面的資料管理軟體，提供自動化、效率、資料保護和領先的安全功能，同時滿足任何嚴苛的效能需求。將ONTAP軟體與 VMware vSphere 結合，可減少主機硬體和 VMware 授權費用，確保以較低的成本保護數據，並提供一致的高效能。

虛擬化工作負載本質上是動態的。因此，管理員利用 VMware Storage vMotion 在同一儲存系統內跨 VMFS、NFS 或vVols資料儲存遷移虛擬機器。這使他們能夠探索各種儲存策略，包括全快閃系統或最新的ASA模型，利用 SAN 創新來提高成本效率。

image:virt-options-001.png["NetApp ONTAP優勢圖"]

ONTAP儲存解決方案具有以下優勢：

* *獨立擴充：*將工作負載資料管理、保護和移動性卸載到與 vSphere 整合的儲存中，從而無需添加運算資源即可擴充存儲
* *超快效能：*透過尖端的 NVMe 和ASA架構提供亞毫秒延遲和高吞吐量。針對傳統虛擬機器和現代 Kubernetes 或 AI 部署最佳化快閃記憶體、NVMe 和 GPU 效能。
* *綜合數據服務：*使用內建功能壓縮、重複資料刪除和壓縮數據，儲存量減少 5-30 倍，資料中心效率提高 85-90%
* *無縫叢集和高可用性：*利用SnapMirror主動同步或MetroCluster實現輕鬆的延伸叢集和強大的災難復原。
* *多協定：* ONTAP支援透過多種協定存取數據，例如 NFS、iSCSI、SMB 和 S3。運行ONTAP 的系統在幾個重要方面是統一的。最初這種方法同時涉及 NAS 和 SAN 協議， ONTAP繼續作為 SAN 的領先平台，同時又具有其在 NAS 方面的原始優勢。
* *自動化設定與編排：*利用 VMware 的ONTAP工具及其 REST API、vSphere 外掛程式和 SPBM（儲存策略）來自動化和簡化儲存管理。
* *整合資料保護與低成本災難復原：*使用NetApp SnapCenter卸載虛擬工作負載備份與復原。利用NetApp BlueXP disaster recovery即服務 (DRaaS) 實現更低的 RPO 並減少 RTO 資料複製。這消除了對昂貴的替代基礎設施的需求，為 VMware 工作負載提供了經濟實惠的災難保護。無論是從本機到本機NetApp ONTAP環境或是 VMware Cloud， NetApp支援的儲存都能確保提供強大的保護。
* *勒索軟體偵測*：透過內建自主勒索軟體保護和零信任相容性，將 VMware 級安全性和合規性擴展到數據，透過啟用多因素身分驗證、基於角色的存取、全面日誌記錄和使用者行為異常檢測，提高保護、偵測、補救和復原能力
* *整合混合雲：*簡化並整合工作負載移動性、備份和復原以及災難復原到任何超大規模雲端（Elastic VMware Service、Azure VMware Solution 和 Google Cloud VMware Engine）。
* *儲存生命週期計畫 (SLP)*：如果組織已準備好採取此步驟，則可以無中斷地升級到下一代控制器或選擇雲端儲存。




=== 關鍵要點

* 使用ONTAP卸載 CPU 密集型任務（例如儲存效率、加密、快照等）來消除 ESXi 主機上的 CPU 影響和開銷。這種優化減少了每台主機上所需的核心數量，從而降低了總體擁有成本 (TCO)。
* 借助ONTAP，從初始容量開始並利用卓越的資料減少和行動技術，無需添加新主機即可降低 20-50% 的成本。
* ONTAP儲存可以與多個工作負載域一起使用，而不受特定叢集的限制，從而提高跨多個叢集的整體利用率。
* ONTAP Snapshot 與SnapCenter集成，為虛擬機器和資料儲存級備份以及細微恢復提供卓越且免費的資料保護。此外， ONTAP還支援將快照卸載到物件儲存以進行長期保留。
* 體驗無縫存儲，無需配置 RAID 或儲存池、持續的資料縮減和加密。
* 借助ONTAP One，您可以存取所有ONTAP功能和強大的安全性，而無需擔心許可障礙。與NetApp BlueXP DRaaS 配對可進一步降低成本。




== 合適的規模和優化

隨著這些授權變更生效，每個 IT 組織都面臨著總擁有成本 (TCO) 可能增加的壓力，有時甚至超過 10 倍。經過最佳化的 VMware 環境可在控制授權費用的同時最大限度地提高效能。這確保了有效的資源管理和容量規劃。使用正確的工具集，您可以快速識別浪費或閒置的資源以回收核心，從而減少核心數量，進而降低整體授權成本。

NetApp提供了一套強大的工具來克服這些挑戰，提供增強的視覺性、無縫整合、成本效益和強大的安全性。透過利用這些功能，組織可以在這種混亂中生存甚至發展，並為未來帶來的任何挑戰做好準備。注意：請記住，大多數組織已經將此作為其雲端評估的一部分，並且相同的流程和工具有助於避免內部部署世界中的成本恐慌，並節省任何由情緒驅動的遷移到替代虛擬機器管理程式的成本。



=== NetApp如何提供協助



==== NetApp TCO Estimator：NetApp 的免費 TCO 估價工具

* 基於 HTML 的簡單計算器
* 使用NetApp VMDC、RVTools 或手動輸入方法
* 輕鬆預測給定部署所需的主機數量，並計算使用NetApp ONTAP儲存系統最佳化部署所需的節省。
* 顯示可能的節省



NOTE: 這link:https://tco.solutions.netapp.com/vmwntaptco/["TCO估算器"]僅NetApp現場團隊和合作夥伴可存取。與NetApp客戶團隊合作評估您現有的環境。



==== VM 資料收集器 (VMDC)：NetApp 的免費 VMware 評估工具

* 輕量級、即時收集配置和效能數據
* 具有 Web 介面的簡單基於 Windows 的部署
* 視覺化虛擬機器拓樸關係並匯出 Excel 報告
* 專門針對 VMware 核心授權最佳化


VMDC 可用link:https://mysupport.netapp.com/site/tools/tool-eula/vm-data-collector/["這裡"]。



==== Data Infrastructure Insights（以前稱為Cloud Insights）

* 基於 SaaS 的跨混合/多雲環境的持續監控
* 支援異質環境，包括 Pure、Dell、HPE 儲存系統和 vSAN。
* 具有 AI/ML 支援的高級分析功能，可識別孤立的虛擬機器和未使用的儲存容量 - 部署以進行詳細分析並提供虛擬機器回收建議。
* 提供工作負載分析功能，以便在遷移之前調整虛擬機器的大小，並確保關鍵應用程式在遷移之前、遷移期間和遷移之後滿足 SLA。
* 提供 30 天免費試用期


透過 DII，可以使用即時指標深入分析跨虛擬機器的工作負載 IO 設定檔。


NOTE: NetApp提供了一項名為「虛擬化現代化評估」的評估，它是NetApp架構和設計服務的功能。每個虛擬機器都映射到兩個軸上：CPU 使用率和記憶體利用率。在研討會期間，我們將向客戶提供有關內部部署優化和雲端遷移策略的所有詳細信息，以促進有效利用資源和降低成本。透過實施這些策略，組織可以維護高效能的 VMware 環境，同時有效地管理成本。



==== 關鍵要點

VMDC 是實施 DII 之前的一個快速的第一步評估，用於跨異構環境進行持續監控和高級 AI/ML 驅動的分析。



==== VCF 導入工具：使用 NFS 或 FC 作為主要儲存來執行 VCF

隨著 VMware Cloud Foundation (VCF) 5.2 的發布，可以將現有的 vSphere 基礎架構轉換為 VCF 管理域，並將其他叢集作為 VCF VI 工作負載域匯入。有了它，VMware Cloud Foundation (VCF) 現在可以在NetApp儲存平台上完全運行，而無需使用 vSAN（是的，所有這些都不需要 vSAN）。轉換在ONTAP上運行現有 NFS 或 FC 資料儲存的叢集涉及將現有基礎架構整合到現代私有雲中，這意味著不需要 vSAN。此流程受益於 NFS 和 FC 儲存的靈活性，以確保無縫的資料存取和管理。透過轉換過程建立 VCF 管理網域後，管理員可以有效地將其他 vSphere 叢集（包括使用 NFS 或 FC 資料儲存的叢集）匯入 VCF 生態系統。這種整合不僅提高了資源利用率，還簡化了私有雲基礎架構的管理，確保了平穩過渡，並且對現有工作負載的干擾最小。


NOTE: 僅用作主儲存時支援 NFS v3 和 FC 協定。補充儲存可以使用 vSphere 支援的 NFS 協定 v3 或 4.1。



==== 重點：

導入或轉換現有的 ESXi 叢集可以利用現有的ONTAP存儲作為資料存儲，而無需部署 vSAN 或額外的硬體資源，從而使 VCF 資源高效、成本優化和簡化。



==== 使用ONTAP儲存從現有 vSphere 遷移到 VCF

如果 VMware Cloud Foundation 是全新安裝（建立新的 vSphere 基礎架構和單一登入網域），則無法從 Cloud Foundation 管理在舊 vSphere 版本上執行的現有工作負載。第一步是將現有 vSphere 環境上執行的目前應用程式虛擬機器遷移到 Cloud Foundation。遷移路徑取決於遷移選擇（即時、溫和冷遷移）以及任何現有 vSphere 環境的版本。以下是根據來源儲存按優先順序排列的選項。

* HCX 是目前可用於 Cloud Foundation 工作負載移動的功能最豐富的工具。
* 利用NetApp BlueXP DRaaS
* 具有 SRM 的 vSphere 複製可以成為易於使用的 vSphere 遷移工具。
* 使用 VAIO 和 VADP 的第三方軟體




==== 將虛擬機器從非NetApp儲存移轉到ONTAP存儲

大多數情況下最簡單的方法是使用 Storage vMotion。叢集應該能夠存取新的ONTAP SAN 或 NAS 資料儲存庫以及您要從中遷移虛擬機器的儲存（SAN、NAS 等）。過程很簡單：在 vSphere Web Client 中選擇一個或多個虛擬機，右鍵單擊選擇，然後按一下「遷移」。選擇「僅儲存」選項，選擇新的ONTAP資料儲存作為目標，然後繼續執行遷移精靈的最後幾個步驟。 vSphere 會將檔案（VMX、 NVRAM、VMDK 等）從舊儲存複製到由ONTAP支援的資料儲存。請注意，vSphere 可能會複製大量資料。此方法不需要任何停機時間。虛擬機器在遷移過程中繼續運作。其他選項包括基於主機的遷移和第三方複製來執行遷移。



==== 使用儲存快照進行災難復原（透過儲存複製進一步優化）

NetApp提供業界領先的基於 SaaS 的災難復原 (DRaaS) 解決方案，可大幅降低成本並減少複雜性。無需購買和部署昂貴的替代基礎設施。

透過從生產站點到災難復原站點的區塊級複製來實現災難復原是一種具有彈性且經濟高效的方法，可保護工作負載免受網站中斷和資料損壞事件（例如勒索軟體攻擊）的影響。使用NetApp SnapMirror複製，在具有 NFS 或 VMFS 資料儲存區的本機ONTAP系統上執行的 VMware 工作負載可以複製到位於指定復原資料中心的另一個ONTAP儲存系統，該資料中心也部署了 VMware。

使用BlueXP disaster recovery服務，該服務整合到NetApp BlueXP控制台中，客戶可以在其中發現其內部部署的 VMware vCenter 以及ONTAP儲存、建立資源群組、建立災難復原計畫、將其與資源群組關聯以及測試或執行故障轉移和故障復原。 SnapMirror提供儲存層級區塊複製，使兩個網站保持最新的增量更改，使 RPO 達到最長 5 分鐘。也可以將 DR 流程模擬為常規演習，而不會影響生產和複製的資料儲存或產生額外的儲存成本。  BlueXP disaster recovery利用 ONTAP 的FlexClone技術，從 DR 站點上最後複製的快照建立 NFS 或 VMFS 資料儲存庫的空間高效副本。 DR 測試完成後，只需刪除測試環境，同樣不會對實際複製的生產資源產生任何影響。當需要（計劃內或計劃外）進行實際故障轉移時，只需單擊幾下， BlueXP disaster recovery服務就會協調所需的所有步驟，自動在指定的災難復原站點上啟動受保護的虛擬機器。該服務還將逆轉與主站點的SnapMirror關係，並在需要時將任何變更從輔助站點複製到主站點以進行故障恢復操作。與其他知名替代方案相比，所有這些都只需花費一小部分成本即可實現。


NOTE: 支援複製功能的第三方備份產品和帶有 SRA 的 VMware Live Recovery 是其他突出的替代方案。



==== 勒索軟體

儘早偵測勒索軟體對於防止其傳播和避免代價高昂的停機至關重要。有效的勒索軟體偵測策略必須在 ESXi 主機和客戶 VM 層級納入多層保護。雖然實施了多種安全措施來全面防禦勒索軟體攻擊，但ONTAP能夠在整體防禦方法中添加更多層保護。舉幾個功能的例子，它首先包括快照、自主勒索軟體保護和防篡改快照。

讓我們看看上述功能如何與 VMware 搭配使用來保護資料並恢復資料以抵禦勒索軟體的攻擊。

為了保護 vSphere 和客戶虛擬機器免受攻擊，必須採取多項措施，包括分段、利用端點的 EDR/XDR/SIEM、安裝安全性更新並遵守適當的強化指南。駐留在資料儲存上的每個虛擬機器也託管一個標準作業系統。確保企業伺服器安裝反惡意軟體產品套件並定期更新，這是多層勒索軟體保護策略的重要組成部分。除此之外，在為資料儲存提供支援的 NFS 磁碟區上啟用自主勒索軟體保護 (ARP)。  ARP 利用內建的 onbox ML 查看卷宗工作負載活動和資料熵來自動偵測勒索軟體。  ARP 可透過ONTAP內建管理介面或系統管理員進行配置，並依磁碟區啟用。

除了多層方法之外，還有一個本機內建ONTAP解決方案，用於保護未經授權刪除備份 Snapshot 副本。它被稱為多管理員驗證或 MAV，在ONTAP 9.11.1 及更高版本中可用。理想的方法是使用查詢來執行 MAV 特定的操作。


NOTE: 有了新的NetApp ARP/AI，就不再需要學習模式。相反，它可以利用其人工智慧勒索軟體檢測功能直接進入主動模式。



==== 關鍵要點

使用ONTAP One，所有作為附加層的安全功能集都是完全免費的。存取 NetApp 強大的資料保護、安全套件以及ONTAP提供的所有功能，無需擔心許可障礙。



== 值得考慮的 VMware 替代方案

每個組織都在評估多虛擬機器管理程序方法，該方法支援多供應商虛擬機器管理程序策略，從而增強營運靈活性、減輕對供應商的依賴性並優化工作負載安排。透過組合多個虛擬機器管理程序，組織可以客製化基礎架構以滿足不同的工作負載需求，同時管理成本。然後，組織透過利用互通性、經濟高效的授權和自動化來簡化多虛擬機器管理程序管理。 ONTAP是任何虛擬機器管理程式平台的理想平台。這種方法的關鍵要求是基於 SLA 和工作負載放置策略的動態虛擬機器移動性。



=== 採用多虛擬機器管理程序的關鍵考量因素

* *策略成本優化：*減少對單一供應商的依賴可優化營運和授權費用。
* *工作負載分配：*為正確的工作負載部署正確的虛擬機器管理程式可最大限度地提高效率。
* *靈活性：*支援根據業務應用需求最佳化虛擬機器以及資料中心的現代化和整合。


在本節中，我們將按優先順序簡要介紹組織考慮的不同虛擬機器管理程序。


NOTE: 這些是組織考慮的常見替代方案，但每個客戶的優先順序會根據其評估、技能和工作量要求而有所不同。

image:virt-options-002.png["NetApp支援的虛擬化選項圖"]



=== Hyper-V（Windows 伺服器）

讓我們來探索一下：

* Windows Server 版本中一個眾所周知的內建功能。
* 為 Windows Server 中的虛擬機器啟用虛擬化功能。
* 當與 System Center 套件（包括 SCVMM 和 SCOM）的功能整合時，Hyper-V 提供了一套可與其他虛擬化解決方案相媲美的全面功能。




==== 整合

* NetApp SMI-S Provider將 SAN 和 NAS 的動態儲存管理與 System Center Virtual Machine Manager (SCVMM) 整合。
* 許多第三方備份合作夥伴也支援整合ONTAP快照和SnapMirror支持，以實現完全優化的陣列原生備份和復原。
* ONTAP仍然是唯一允許在 SAN 和 NAS 之間進行本機副本卸載以實現靈活性和儲存消耗的資料基礎設施系統，並且ONTAP還提供跨 NAS（透過 SMB/CIFS 的 SMB3 TRIM）和 SAN（iSCSI 和具有 SCSI UNMAP 的 FCP）協定的本機空間回收。
* SnapManager for Hyper-V用於精細備份和復原（需要 PVR 支援）。如果符合以下條件，Hyper-V 可能是可行的選擇：
* 最近升級到新硬體或對內部基礎設施進行了大量投資。
* 使用 SAN 或 NAS 進行儲存（Azure Stack HCI 不是一種選擇）
* 需要儲存和運算獨立成長由於硬體投資、政治格局、法規遵循、應用程式開發或其他現有障礙等因素而無法現代化




=== OpenShift 虛擬化（RedHat KubeVirt 實作）

讓我們來探索一下：

* 使用 KVM 虛擬機器管理程序，在容器中運行，以 Pod 形式管理
* 由 Kubernetes 調度、部署和管理
* 使用 OpenShift Web 介面建立、修改和銷毀虛擬機器及其資源
* 與容器編排器資源和服務集成，實現持久性儲存範例。




==== 整合

* Trident CSI 允許以 VM 粒度和分類的方式動態管理 NFS、FC、iSCSI 和 NVMe/TCP 上的儲存。
* Trident CSI 用於設定、快照建立、磁碟區擴充和複製創建
* Trident Protect 支援 OpenShift 虛擬化虛擬機器的崩潰一致性備份和恢復，並將它們儲存在任何與 S3 相容的物件儲存桶中。
* Trident Protect 還透過儲存複製和 OpenShift 虛擬化虛擬機器的自動故障轉移和故障復原提供災難復原。


如果符合以下情況，OpenShift 虛擬化可能有意義：

* 將虛擬機器和容器整合到單一平台。
* 減少授權開銷，因為 OpenShift 虛擬化是 OpenShift 的一部分，而 OpenShift 可能已經獲得容器工作負載的授權。
* 將舊式虛擬機器遷移到雲端原生生態系統中，無需第一天進行完全重構。




=== Proxmox 虛擬環境（Proxmox VE）

讓我們來探索一下：

* 適用於 Qemu KVM 和 LXC 的全面開源虛擬化平台
* 基於Linux發行版Debian
* 既可以作為獨立機器運行，也可以在由多台機器組成的叢集中運行
* 簡單、有效率地部署虛擬機器和容器
* 使用者友善的基於 Web 的管理介面和即時遷移和備份選項等功能。




==== 整合

* 使用 iSCSI、NFS v3、v4.1 和 v4.2。
* ONTAP提供的所有出色功能，例如快速複製、快照和複製。
* 使用 nconnect 選項，對於高 NFS 工作負載，每個伺服器的 TCP 連線數最多可以增加到 16 個


如果符合以下情況，Proxmox 可能有意義：

* 開源，免許可證費用。
* 易於使用的 Web 介面簡化了管理。
* 同時支援虛擬機器和容器，提供靈活性。
* 單一介面管理虛擬機器、容器、儲存和網絡
* 不受限制地存取所有功能
* 透過 Credativ 提供專業服務和支持




=== VMware Cloud 產品（Azure VMWare 解決方案、Google Cloud VMware Engine、AWS 上的 VMware Cloud、Elastic VMware 服務）

讓我們來探索一下：

* VMware in the Cloud 提供託管在相應超大規模資料中心的“私有雲”，該資料中心利用專用裸機基礎架構來託管 VMware 基礎架構。
* 每個叢集最多可容納 16 個主機，並具有 VMware 功能，包括 vCenter、vSphere、vSAN 和 NSX
* 快速部署和擴大/縮小規模
* 靈活的購買選項：按小時按需購買、1 年和 3 年預留實例，某些超大規模企業還提供 5 年選項。
* 提供熟悉的工具和流程，協助實現從本機 VMware 到雲端中的 VMware 的遷移。




==== 整合


NOTE: NetApp是唯一在三大超大規模資料中心中提供由 VMware 在雲端支援的首方整合高效能儲存的外部儲存供應商。

* 每個雲端中的NetApp支援的儲存（Azure NetApp Files、FSx for ONTAP、Google Cloud NetApp磁碟區）補充了 vSAN 存儲，而不必新增額外的運算節點。
* 效能穩定、計量檔案儲存服務
* 高效的快照和克隆，可快速大規模建立副本和檢查點更改
* 基於增量區塊傳輸的高效複製，用於區域災難復原和備份
* 使用NetApp支援的雲端儲存作為資料存儲，儲存密集型應用程式的運行成本將更低
* 除外部資料儲存連線外，還能夠掛載客戶機管理的用戶機自有檔案系統（如 NFS 或 iSCSI），以實現高效能工作負載


遷移到 VMware Cloud 產品的原因：

* 儲存密集型部署透過卸載儲存容量而不是添加更多運算節點來節省成本
* 與過渡到 Hyper-V、Azure Stack 甚至本機 VM 格式相比，所需的技能提升較少
* 鎖定價格，最長 3 年或 5 年內不會受到其他授權成本變化的影響（取決於雲端提供者）。
* 提供 BYOL（自備許可）覆蓋
* 從內部部署中提升並轉移有助於降低關鍵領域的成本。
* 建置或轉移災難復原功能至雲端，降低成本並消除營運負擔


對於希望在任何超大規模伺服器上使用 VMware Cloud 作為災難復原目標的客戶，可以使用ONTAP儲存支援的資料儲存區（Azure NetApp Files、FSx ONTAP、Google Cloud NetApp磁碟區）透過任何經過驗證的提供 VM 複製功能的第三方解決方案從本機複製資料。透過新增由ONTAP儲存支援的資料儲存區，它將在具有較少 ESXi 主機數量的目標上實現成本優化的災難復原。這也使得在本地環境中停用輔助站點成為可能，從而顯著節省成本。

* 查看詳細指南link:https://docs.netapp.com/us-en/netapp-solutions-cloud/vmware/vmw-aws-fsxn-vmc-ds-dr-veeam.html["災難復原至 FSx ONTAP資料存儲"^]。
* 查看詳細指南link:https://docs.netapp.com/us-en/netapp-solutions-cloud/vmware/vmw-azure-avs-dr-jetstream.html["災難復原到Azure NetApp Files資料存儲"^]。
* 查看詳細指南link:https://docs.netapp.com/us-en/netapp-solutions-cloud/vmware/vmw-gcp-gcve-app-dr-ds-veeam.html["災難復原至Google Cloud NetApp Volumes資料儲存區"^]。




=== 雲端原生虛擬機


NOTE: NetApp是唯一在所有 3 個主要超大規模資料中心中都擁有第一方整合高效能多重協定雲端儲存的供應商。

讓我們來探索一下：

* 透過靈活的虛擬機器大小優化運算資源，以滿足特定的業務需求並消除不必要的開支。
* 利用雲端的靈活性平穩過渡到未來。遷移到採用NetApp儲存的雲端原生虛擬機器的原因：
* 利用企業儲存功能，如精簡配置、儲存效率、零佔用複製、整合備份、區塊級複製、分層，從而優化遷移工作，並從第一天起實現面向未來的部署
* 透過整合ONTAP並使用其提供的成本優化功能，優化雲端中原生雲端實例上使用的當前儲存部署
* 節省成本的能力
+
** 使用ONTAP資料管理技術
** 透過對眾多資源的保留
** 透過突發虛擬機和現貨虛擬機


* 利用人工智慧/機器學習等現代技術
* 與區塊儲存解決方案相比，透過調整雲端實例的大小以滿足必要的 IOP 和吞吐量參數，可以降低實例總體擁有成本 (TCO)。




=== Azure Local 或 AWS Outpost 或任何其他 HCI 模型

讓我們來探索一下：

* 在經過驗證的解決方案上運行
* 可在場所內部署的打包解決方案，可作為混合雲或多雲的核心。
* 為使用者提供針對任何環境（本地、雲端或混合）客製化的雲端基礎架構、服務、API 和工具的存取權限。



NOTE: 必須擁有或租賃/購買與 HCI 相容的硬體。


NOTE: Azure 本地不支援外部存儲，但 AWS Outpost 支援ONTAP

遷移到 Azure Local 或 AWS Outpost 的原因：

* 如果已經擁有 HCI 相容硬體
* 控制工作負載的執行和資料儲存。
* 使用相應的服務、工具和 API 滿足本地資料駐留並在本地區域處理數據
* 使用來賓連線儲存為來賓虛擬機器提供 iSCSI、NFS 和 SMB 連線。


缺點：

* 並非所有選項都支援 SAN、NAS 或獨立儲存配置
* 不支援儲存和運算的獨立擴展




=== 在客戶環境中正在考慮的其他虛擬機器管理程式選項

* *KVM* 通常在每個父 Linux 發行版上都支援ONTAP ，只需參考IMT即可取得參考 Linux。
* *SUSE Harvester* 是一種現代超融合基礎架構 (HCI) 解決方案，使用企業級開源技術（包括 Linux、KVM、Kubernetes、KubeVirt 和 Longhorn）為裸機伺服器建置。  Harvester 專為尋求靈活且經濟實惠的解決方案以在資料中心和邊緣運行雲端原生和虛擬機器 (VM) 工作負載的使用者而設計，它為虛擬化和雲端原生工作負載管理提供了單一管理平台。  NetApp Astra Trident CSI 驅動程式引入 Harvester 叢集後， NetApp儲存系統可以儲存在 Harvester 中執行的虛擬機器可用的儲存磁碟區。
* *Red Hat OpenStack Platform* 和 OpenStack 整體來說也是一個令人難以置信的私有雲解決方案，而NetApp Unified Driver 已融入上游 OpenStack 程式碼，這意味著NetApp資料管理整合已內建其中。也就是說，無需安裝任何東西！儲存管理功能支援區塊協定的NVMe、iSCSI或FC，以及NAS的NFS。精簡配置、動態儲存管理、副本卸載和快照均受原生支援。




==== 關鍵要點

ONTAP是適合任何內部部署虛擬機器管理程式或雲端任何工作負載的平台。 ONTAP支援本地環境中的知名虛擬機器管理程序，並在每個雲端中廣泛採用第一方產品。這使得客戶能夠透過瀏覽適當的部署模型輕鬆處理許可變更。

image:virt-options-003.png["圖表展示了 NetApp 的 Any to Any 虛擬化方法"]

總而言之，VMware 仍然是組織事實上的虛擬機器管理程式。然而，每個 IT 組織都在評估替代方案，並且ONTAP將在他們選擇的任何選項中發揮重要作用。



== 超快（100 倍速度）遷移



=== Shift 工具包

如上所述，VMware、Microsoft Hyper-V、Proxmox 和 OpenShift Virtualization 等解決方案已成為滿足虛擬化需求的強大且可靠的選擇。鑑於業務需求是動態的，虛擬化平台的選擇也必須具有適應性，並且即時虛擬機器移動性變得重要。

從一個虛擬機器管理程式遷移到另一個虛擬機器管理程式對於企業來說是一個複雜的決策過程。主要考慮因素包括應用程式依賴性、遷移時間表、工作負載關鍵性以及應用程式停機對業務的影響。然而，有了ONTAP儲存和 Shift 工具包，這一切都變得輕而易舉。

NetApp Shift 工具包是一種易於使用的圖形使用者介面 (GUI) 解決方案，可在不同的虛擬機器管理程式之間遷移虛擬機器 (VM) 並轉換虛擬磁碟格式。它利用NetApp FlexClone技術快速轉換 VM 硬碟。此外，該工具包還管理目標虛擬機器的建立和配置。

有關詳細信息，請參閱link:../migration/shift-toolkit-overview.html["在虛擬化環境之間遷移虛擬機器（VM）（Shift Toolkit）"]。

image:virt-options-004.png["顯示NetApp Shift Toolkit 轉換選項的圖表"]


NOTE: Shift 工具包的先決條件是讓虛擬機器在ONTAP儲存上的 NFS 磁碟區上運作。這表示如果虛擬機器託管在基於區塊的ONTAP儲存（特別是ASA）或第三方儲存區上，則應使用 Storage vMotion 將虛擬機器移至指定的基於ONTAP的 NFS 資料儲存區。  Shift 工具包可在此下載，僅適用於 Windows 系統。



=== Cirrus 資料遷移操作

Shift 工具包的替代方案是依賴區塊級複製的基於合作夥伴的解決方案。 Cirrus Data 可以將工作負載從傳統的虛擬機器管理程式無縫遷移到現代平台，從而實現更靈活的混合工作負載、加速現代化進程並提高資源利用率。link:https://action.cirrusdata.com/virtualization-optimization#:~:text=Migrate%20from%20leading%20hypervisors%20with%20just%20a%20click.,from%20Amazon%20Web%20Services%20%28AWS%29%20and%20Microsoft%20Azure.["Cirrus 遷移雲"]與 MigrateOps 一起，使組織能夠透過安全、易於使用且可靠的解決方案自動從一個虛擬機器管理程式轉換到另一個虛擬機器管理程式。

*關鍵要點：*將虛擬機器從 VMware 遷移到另一個虛擬機器管理程式有多種選擇。舉幾個例子──Veeam、Commvault、StarWind、SCVMM 等等。這裡的目標是展示可能的選項，但是，Shift 工具包將提供數量級最快的遷移選項。根據具體情況，可以採用替代的遷移選項。



== 通用預計部署模型（在多虛擬機器管理程式環境中）

一位客戶擁有包含 10,000 台虛擬機器（Windows 和 Linux 工作負載混合）的大規模虛擬化環境。為了優化授權成本並簡化虛擬化基礎架構的未來，多虛擬機管理程序和虛擬機器放置策略非常重要。他們根據工作負載的關鍵性、作業系統類型、效能要求、虛擬機器管理程式功能和授權成本選擇了虛擬機器放置策略。

組織策略分為三個虛擬機器管理程序：

* VMware vSphere → 支援關鍵業務應用程式的關鍵工作負載仍保留在 VMware 上
* Microsoft Hyper-V → 5,000 台 Windows VM 移轉到 Hyper-V，利用 Windows 授權優勢
* OpenShift 虛擬化 → 3,000 個 Linux VM 遷移到這裡，以實現成本效益和 Kubernetes 原生管理。


這種多虛擬機器管理程式方法平衡了成本、效能和靈活性，確保關鍵工作負載保留在 VMware 上，同時 Windows 和 Linux 工作負載使用 Shift 工具包遷移到最佳化的虛擬機器管理程式平台，以實現效率和可擴充性。以上是一個例子，然而，可以在每個應用程式層級應用不同的排列組合來優化環境。



== 結論

在收購 Broadcom 之後，VMware 的客戶正面臨複雜的整合、效能最佳化和成本管理環境。 NetApp提供了一套強大的工具和功能來克服這些挑戰，提供增強的視覺性、無縫整合、成本效益和強大的安全性。透過使用這些功能，您可以繼續使用 VMware，啟用多供應商方法，並為未來的中斷做好準備。

利用 VMware Cloud Foundation 5.2.1 及更高版本，企業可以採用現代私有雲實踐，而不受 vSAN 的限制。這有助於從現有 vSphere 環境無縫遷移，同時保護對ONTAP儲存的投資。

此外，整合多虛擬機器管理程序策略可確保組織控制其虛擬化路線圖、降低成本並根據每個工作負載的獨特需求自訂其基礎架構。 Hyper-V、OpenShift Virtualization、Proxmox 和 KVM 各自具有獨特的優勢。為了確定最佳匹配，請評估預算、現有基礎設施、性能要求和支援需求等因素。無論選擇哪種虛擬機器管理程式平台，也無論它位於何處（本地或雲端）， ONTAP都是最佳儲存。
