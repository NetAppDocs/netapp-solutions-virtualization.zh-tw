---
sidebar: sidebar 
permalink: proxmox/proxmox-overview.html 
keywords: proxmox ve, kvm, qemu, lxc, vm 
summary:  
---
= 了解 Proxmox 虛擬環境
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Proxmox 虛擬環境 (VE) 是一個基於 Debian Linux 的開源 Type-1 虛擬機器管理程序，能夠託管虛擬機器和 Linux 容器 (LXC)。了解 Proxmox VE，包括其對完整 VM 和基於容器的虛擬化、叢集管理、運算和儲存選項、網路功能、監控工具和資料保護策略的支援。



== 概況

Proxmox 虛擬環境 (VE) 支援同一主機上的完整 VM 和基於容器的虛擬化。基於核心的虛擬機器 (KVM) 和快速模擬器 (QEMU) 用於實現完整的虛擬機器虛擬化。  QEMU 是一個開源機器模擬器和虛擬化器，它使用 KVM 核心模組直接在主機 CPU 上執行客戶程式碼。  Linux 容器 (LXC) 允許像虛擬機器一樣管理容器，且資料在重新啟動後仍能保留。

image:proxmox-overview-001.png["Proxmox 主機上的 VM 與 LXC"]

RESTful API 可用於自動化任務。有關 API 呼叫的信息，請查看link:https://pve.proxmox.com/pve-docs/api-viewer/index.html["Proxmox VE API 檢視器"]



== 叢集管理

基於 Web 的管理入口網站可在 Proxmox VE 節點的連接埠 8006 上使用。可以將多個節點連接在一起以形成一個叢集。  Proxmox VE 配置， `/etc/pve` ，在叢集的所有節點之間共用。 Proxmox VE 用途link:https://pve.proxmox.com/wiki/Cluster_Manager["Corosync 集群引擎"]管理集群。可以從叢集的任何節點存取管理入口網站。

image:proxmox-overview-002.png["管理介面"]

如果託管節點發生故障，叢集可以監控虛擬機器和容器並在其他節點上重新啟動。需要配置虛擬機器和容器以實現高可用性 (HA)。可以透過建立群組將虛擬機器和容器託管在特定的主機子集上。 VM 或容器託管在優先順序最高的主機上。欲了解更多信息，請查看link:https://pve.proxmox.com/wiki/High_Availability["房委會經理"]

image:proxmox-overview-003.png["HA 組優先權"]

驗證選項包括 Linux PAM、Proxmox VE PAM、LDAP、Microsoft AD 或 OpenID。可以透過角色和使用資源池（資源集合）來分配權限。如需更多詳細信息，請查看link:https://pve.proxmox.com/pve-docs/chapter-pveum.html["Proxmox使用者管理"]


TIP: LDAP/Microsoft AD 的連線憑證可能以明文形式儲存，並儲存在需要主機檔案系統保護的檔案中。



== 運算

VM 的 CPU 選項包括 CPU 核心和插槽的數量（用於指定 vCPU 的數量）、選擇 NUMA 的選項、定義親和力、設定限制和 CPU 類型。

image:proxmox-overview-011.png["VM CPU 選項"]

有關 CPU 類型及其如何影響即時遷移的指導，請查看link:https://pve.proxmox.com/pve-docs/chapter-qm.html#qm_cpu["Proxmox VE 文件的 QEMU/KVM 虛擬機器部分"]

LXC 容器鏡像的 CPU 選項如下面的螢幕截圖所示。

image:proxmox-overview-012.png["LXC CPU 選項"]

VM和LXC可以指定記憶體大小。對於虛擬機，膨脹功能適用於 Linux 虛擬機。有關詳細信息，請參閱link:https://pve.proxmox.com/pve-docs/chapter-qm.html#qm_memory["Proxmox VE 文件的 QEMU/KVM 虛擬機器部分"]



== 儲存

虛擬機器由一個設定檔組成， `/etc/pve/qemu-server/<vm id>.conf`以及虛擬磁碟組件。支援的虛擬磁碟格式為 raw、qcow2 和 VMDK。  QCOW2 可在各種儲存類型上提供精簡配置和快照功能。

image:proxmox-overview-004.png["虛擬機器磁碟格式"]

可以選擇將 iSCSI LUN 作為原始設備呈現給 VM。

LXC也有自己的設定文件， `/etc/pve/lxc/<container id>.conf`以及容器磁碟組件。可以從支援的儲存類型中掛載資料卷。

image:proxmox-overview-005.png["貨櫃附加支架"]

支援的儲存類型包括本機磁碟、NAS（SMB 和 NFS）和 SAN（FC、iSCSI、NVMe-oF 等）。有關詳細信息，請參閱link:https://pve.proxmox.com/pve-docs/chapter-pvesm.html["Proxmox VE存儲"]

每個儲存磁碟區都配置了允許的內容類型。  NAS 磁碟區支援所有內容類型，而 SAN 支援僅限於 VM 和容器映像。


NOTE: 目錄儲存類型也支援所有內容類型。  SMB 連線憑證以明文形式存儲，只有 root 可以存取。

image:proxmox-overview-006.png["NAS 的內容類型"]

image:proxmox-overview-007.png["具有 SAN 的內容類型"]

若要從 Broadcom vSphere 環境匯入虛擬機，vSphere 主機也可以作為儲存設備包含在內。



== 網路

Proxmox VE 支援原生 Linux 網路功能（如 Linux 橋接器或 Open vSwitch），以實作軟體定義網路 (SDN)。主機上的乙太網路介面可以綁定在一起以提供冗餘和高可用性。其他選項，請參閱link:https://pve.proxmox.com/pve-docs/chapter-sysadmin.html#_choosing_a_network_configuration["Proxmox VE 文檔"]

image:proxmox-overview-008.png["保稅網絡"]

可以在叢集層級配置來賓網絡，並將變更推送到成員主機。透過區域、虛擬網路和子網路來管理分離。link:https://pve.proxmox.com/pve-docs/chapter-pvesdn.html["區"]定義Simple、VLAN、VLAN Stacking、VXLAN、EVPN等網路類型。

根據區域類型的不同，網路的行為會有所不同，並提供特定的功能、優勢和限制。

SDN 的用例範圍從每個單獨節點上的獨立專用網路到跨不同位置的多個 PVE 叢集的複雜覆蓋網路。

在叢集範圍的資料中心 SDN 管理介面中設定 VNet 後，它可作為每個節點本地的通用 Linux 橋接器指派給虛擬機器和容器。

建立虛擬機器時，使用者可以選擇要連接的 Linux 橋接器。建立虛擬機器後可以新增其他介面。

image:proxmox-overview-013.png["虛擬機器網路選擇"]

這是資料中心層級的 VNet 資訊。

image:proxmox-overview-014.png["資料中心的 VNet 訊息"]



== 監控

大多數物件（例如資料中心、主機、虛擬機器、容器、儲存等）的摘要頁面提供了詳細資訊並包含一些效能指標。以下螢幕截圖顯示了主機的摘要頁面，其中包括有關已安裝軟體包的資訊。

image:proxmox-overview-009.png["主機包視圖"]

有關主機、客戶機、儲存等的統計資料可以推送到外部 Graphite 或 Influxdb 資料庫。有關詳細信息，請參閱link:https://pve.proxmox.com/pve-docs/chapter-sysadmin.html#external_metric_server["Proxmox VE 文檔"]。



== 資料保護

Proxmox VE 包括將虛擬機器和容器備份和還原到為備份內容配置的儲存的選項。可以使用工具 vzdump 從 UI 或 CLI 啟動備份，也可以安排備份。有關詳細信息，請參閱link:https://pve.proxmox.com/pve-docs/chapter-vzdump.html["Proxmox VE 文件的備份和還原部分"]。

image:proxmox-overview-010.png["Proxmox VE備份儲存內容"]

備份內容需要儲存在異地，以防止來源網站發生任何災難。

Veeam 在 12.2 版本中增加了對 Proxmox VE 的支援。這允許將 VM 備份從 vSphere 還原到 Proxmox VE 主機。
